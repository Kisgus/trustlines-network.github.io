
<section>
<div class="container">
    <div class="row">
        <div class="col-lg-12 text-center">
            <h2 class="section-heading">Features</h2>
            <hr class="primary">
        </div>
    </div>
</div>

<div class="container">
  {% assign modulo_four = site.services.size | modulo: 4 %}
  {% assign modulo_three = site.services.size | modulo: 3 %}
  {% if modulo_three > modulo_four %}
    {% assign divider = 3 %}
  {% else %}
    {% assign divider = 4 %}
  {% endif %}
  {% if modulo_three == 0 %}
      {% assign divider = 3 %}
  {% endif %}
  {% if modulo_four == 0 %}
    {% assign divider = 4 %}
  {% endif %}
  {% assign remainder = site.services.size | modulo: divider %}

  {% for service in site.services %}
    {% assign itermodulo = forloop.index0 | modulo:divider %}

    {% if forloop.index0 == 0 %}
      <div class="row">
    {% endif %}
    {% if itermodulo == 0 %}
      {% if forloop.index0 != 0 %}
      </div>
      <div class="row">
      {% endif %}
    {% endif %}

    {% assign curr_cycle = forloop.index0 | divided_by: divider | floor %}
    {% assign last_cycle = forloop.length | divided_by: divider | floor %}


    {% if remainder != 0 %}
      {% if curr_cycle == last_cycle %}
        <div class="col-lg-{{ 12 | divided_by: remainder }} col-md-6 text-left">
            <div class="service-box">
                <i class="fa fa-4x {{ service.glyphicon }} wow bounceIn text-primary" data-wow-delay=".{{ forloop.index }}s"></i>
                <h3>{{ service.heading }}</h3>
                <p class="text-muted">{{ service.content }}</p>
            </div>
        </div>
      {% else %}
        <div class="col-lg-{{ 12 | divided_by: divider }} col-md-6 text-left">
            <div class="service-box">
                <i class="fa fa-4x {{ service.glyphicon }} wow bounceIn text-primary" data-wow-delay=".{{ forloop.index }}s"></i>
                <h3>{{ service.heading }}</h3>
                <p class="text-muted">{{ service.content }}</p>
            </div>
        </div>
      {% endif %}
    {% else %}
      <div class="col-lg-{{ 12 | divided_by: divider }} col-md-6 text-left">
          <div class="service-box">
              <i class="fa fa-4x {{ service.glyphicon }} wow bounceIn text-primary" data-wow-delay=".{{ forloop.index }}s"></i>
              <h3>{{ service.heading }}</h3>
              <p class="text-muted">{{ service.content }}</p>
          </div>
      </div>
    {% endif %}

{% endfor %}
</div>

</section>
